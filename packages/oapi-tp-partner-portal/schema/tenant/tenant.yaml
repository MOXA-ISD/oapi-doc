swagger: '2.0'

info:
  version: 0.0.0
  title: ThingsPro Partner Portal RESTful API reference
basePath: '/api/v1'
schemes:
  - http
  - https
produces:
  - application/json
tags:
  - name: tenant
    description: Handles tenants data

paths:
  /tenants:
    get:
      description: Get all tenants
      parameters:
        - name: domainName
          in: query
          description: Filter the tenant list by domain name
          required: false
          type: string
        - name: portalName
          in: query
          description: Filter the tenant list by portal name
          required: false
          type: string
        - name: order
          in: query
          description: The tenant list order by some keyword. default is order by 'createdAt'
          required: false
          type: string
          enum:
          - domainName
          - portalName
        - name: sort
          in: query
          description: Sorting the filter tenant list, default is asc
          required: false
          type: string
          enum:
          - desc
          - asc
        - name: limit
          in: query
          description: max return tenants count (default is 100 and max is 1000)
          required: false
          type: integer
        - name: offset
          in: query
          description: offset
          required: false
          type: integer
      responses:
        200:
          description: An array of tenants
          schema:
            type: array
            items:
              $ref: '#/definitions/Tenant'
            example: 
              $ref: '#/externalDocs/x-mocks/TenantList'
      tags:
        - tenant
  /tenants/{tenantId}:
    parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        type: string
    get:
      description: Return tenant data with given ID
      tags:
        - tenant
      responses:
        200:
          description: An Object of the tenant
          schema:
            type: object
            items:
              $ref: '#/definitions/Tenant'
            example:
              $ref: '#/externalDocs/x-mocks/Tenant'
  /tenants/{tenantId}/offer:
    parameters:
      - name: tenantId
        in: path
        description: Tenant unique identifier
        required: true
        type: string
    patch:
      description: Change tenant offer
      parameters:
        - name: body
          in: body
          description: Offer identifier
          required: true
          schema:
            type: object
            properties:
              offerId:
                type: integer
      responses:
        200:
          description: success
      tags:
        - tenant
        
definitions:
  Tenant:
    type: object
    properties:
      tenantId:
        type: string
        description: Unique identifier representing a specific tenant.
      domainName:
        type: string
        description: Domain name of tenant.
      portalName:
        type: string
        description: Portal name of tenant.
      avatar:
        type: string
        description: Avatar of tenant.
      enabled:
        type: boolean
        description: The tenant is enabled or disabled in this partner
      memberCount:
        type: integer
        description: Members of the tenant
      deviceCount:
        type: integer
        description: Devices of the tenant
      userCount:
        type: integer
        description: Users of the tenant
      activate:
        type: string
        description: Activate status of tenant.
      activatedAt:
        type: string
        description: Tenant activate time, ISO data format, like '2018-08-12T20:17:46.384Z'.
      creator:
        type: string
        description: Created tenant username
      createdAt:
        type: string
        description: Tenant created time,ISO data format, like '2018-08-12T20:17:46.384Z'.
     
externalDocs:
  url: 'http://#'
  x-mocks:
    Tenant:
      {
        "activate": "approved",
        "activatedAt": "",
        "avatar": "",
        "createdAt": "2019-03-08T07:18:27:565Z",
        "creator": "Cain Chen",
        "deviceCount": 5,
        "domainName": "tenant-dev",
        "enabled": true,
        "memberCount": 4,
        "portalName": "MOXA-ISS",
        "tenantId": "ed31872d-b57e-4c94-a989-c2782c0d3fe7",
        "userCount": 28
      }
    TenantList:
      {
        "count": 13,
        "data": [
          {
            "activate": "approved",
            "activatedAt": "",
            "avatar": "",
            "createdAt": "2019-03-08T07:18:27:565Z",
            "creator": "Cain Chen",
            "deviceCount": 5,
            "domainName": "tenant-dev",
            "enabled": true,
            "memberCount": 4,
            "portalName": "MOXA-ISS",
            "tenantId": "ed31872d-b57e-4c94-a989-c2782c0d3fe7",
            "userCount": 28
          }
        ],
        "limit": 1,
        "offset": 0
      }