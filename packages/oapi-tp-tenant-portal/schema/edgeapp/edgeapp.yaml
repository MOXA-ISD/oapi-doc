swagger: '2.0'

info:
  version: 0.0.1
  title: ThingsPro Tenant Portal RESTful API reference
basePath: '/api/v1'
schemes:
  - http
  - https
produces:
  - application/json
tags:
  - name: edgeapp
    description: Handles edge app data

paths:
  /edgeapp:
    get:
      parameters:
        - name: appName
          in: query
          description: Filter the edge app list by appName
          required: false
          type: string
        - name: cpuArch
          in: query
          description: Filter the edge app list by cpuArch
          required: false
          type: string
        - name: categoryId
          in: query
          description: Filter the edge app list by categoryId
          required: false
          type: string
        - name: categoryName
          in: query
          description: Filter the edge app list by categoryName
          required: false
          type: string
        - name: order
          in: query
          description: Ordering the filter edge app list, default is asc
          required: false
          type: string  
          enum:
          - desc
          - asc
        - name: sort
          in: query
          description: Sort the edge app list by specific ordering, default is sort by 'appId'
          required: false
          type: string
          enum:
          - appId
          - appName
          - categoryId
          - categoryName
        - name: limit
          in: query
          description: max return edge app count (default is 100 and max is 1000)
          required: false
          type: integer  
        - name: offset
          in: query
          description: offset
          required: false
          type: integer             
      description: Get all edge app field data
      responses:
        200:
          description: An array of edge app
          schema:
            type: array
            items:
              $ref: '#/definitions/EdgeApp'
          examples: { 'application/json': { $ref: '#/externalDocs/x-mocks/EdgeAppList' } }
      tags:
        - edgeapp

  /edgeapp/{appId}:
    parameters:
      - name: appId
        in: path
        description: edge app unique identifier
        required: true
        type: string
    get:
      description: Return edge app data with given ID
      tags:
        - edgeapp
      responses:
        200:
          description: An Object of the edge app
          schema:
            type: object
            items:
              $ref: '#/definitions/EdgeApp'
          examples: { 'application/json': { $ref: '#/externalDocs/x-mocks/EdgeApp' } }

  /edgeapp/category:
    get:
      description: Get all category of edge app
      responses:
        200:
          description: An array of edge app category
          schema:
            type: array
            items:
              $ref: '#/definitions/EdgeAppCategory'
          examples: { 'application/json': { $ref: '#/externalDocs/x-mocks/EdgeAppCategoryList' } }
      tags:
        - edgeapp

definitions:
  EdgeApp:
    type: object
    properties:
      appId:
        type: string
        description: Unique identifier representing a specific edge app.
      appName:
        type: string
        description: Name of edge app.
      categoryId:
        type: array
        items:
          type: string
        description: Category ID.
      categoryName:
        type: array
        items:
          type: string
        description: Category Name.
      cpuArch:
        type: string
        description: CPU Architecture.  
      description:
        type: string
        description: Description of edge app.  
      displayName:
        type: string
        description: Display Name of edge app.
      iconUrl:
        type: string
        description: The Icon URL of edge app.
      isTrialLicense:
        type: boolean
        description: Is trial license ?
      licenseStatement:
        type: string
        description: License Statement. ( e.g. Trial - 30 days )
      publishAt:
        type: string
        description: Edge app publist time, ISO data format, like '2018-08-12T20:17:46.384Z'.
      publisher:
        type: string
        description: Publisher of edge app.
      trialPeriodInDay:
        type: string
        description: unknown.
      unitPrice:
        type: number
        description: Unit price of edge app.
      validAt:
        type: string
        description: Edge app valid time, ISO data format, like '2018-08-12T20:17:46.384Z'.
      version:
        type: string
        description: Edge app versoin.

  EdgeAppCategory:
    type: object
    properties:
      categoryId:
        type: integer
        description: Unique identifier representing a specific edge app category.
      categoryName:
        type: string
        description: Name of edge app category.
      description:
        type: integer
        description: Description of edge app category.  

externalDocs:
  url: 'http://#'
  x-mocks:
    EdgeApp:
      {
        "appId": 1,
        "appName": "app-azure",
        "categoryId": [
          "1",
          "2"
        ],
        "categoryName": [
          "Cloud Connectivity",
          "Protocol"
        ],
        "cpuArch": "armhf",
        "description": "app-azure",
        "displayName": "app-azure",
        "iconUrl": "http://tenant-west-us.thingspro.io/images/edge-application/app-azure/0.3.0-18/logo.png",
        "isTrialLicense": true,
        "licenseStatement": "Trial - 30 days",
        "publishAt": "2018-09-27T06:54:14.203998+00:00Z",
        "publisher": "Moxa-ISD",
        "trialPeriodInDay": null,
        "unitPrice": null,
        "validAt": "2018-09-27T06:54:14.203998+00:00Z",
        "version": "0.3.0-18"
      }
    EdgeAppList:
      {
        "count": 5,
        "offset": 0,
        "limit": 100,
        "data": [
          {
            "appId": 2,
            "appName": "modbusmaster",
            "categoryId": [
                "1"
            ],
            "categoryName": [
                "Protocol"
            ],
            "cpuArch": "armhf",
            "description": "modbusmaster",
            "displayName": "modbusmaster",
            "iconUrl": "http://tenant-west-us.thingspro.io/images/edge-application/modbusmaster/3.5.6-19/logo.png",
            "isTrialLicense": true,
            "licenseStatement": "Trial - 30 days",
            "publishAt": "2018-09-27T06:54:40.125695+00:00Z",
            "publisher": "Moxa-ISD",
            "trialPeriodInDay": null,
            "unitPrice": null,
            "validAt": "2018-09-27T06:54:40.125695+00:00Z",
            "version": "3.5.6-19"
          },
          {
            "appId": 3,
            "appName": "nodered",
            "categoryId": [
                "3"
            ],
            "categoryName": [
                "Edge Intelligence"
            ],
            "cpuArch": "armhf",
            "description": "nodered",
            "displayName": "nodered",
            "iconUrl": "http://tenant-west-us.thingspro.io/images/edge-application/nodered/0.3.0-1/logo.png",
            "isTrialLicense": true,
            "licenseStatement": "Trial - 30 days",
            "publishAt": "2018-09-27T06:55:15.844222+00:00Z",
            "publisher": "Moxa-ISD",
            "trialPeriodInDay": null,
            "unitPrice": null,
            "validAt": "2018-09-27T06:55:15.844222+00:00Z",
            "version": "0.3.0-1"
          }
        ]
      }
    EdgeAppCategoryList:
      [
        {
          "categoryId": 1,
          "categoryName": "Protocol",
          "description": "Protocol"
        },
        {
          "categoryId": 2,
          "categoryName": "Cloud Connectivity",
          "description": "Cloud Connectivity"
        },
        {
          "categoryId": 3,
          "categoryName": "Edge Intelligence",
          "description": "Edge Intelligence"
        },
        {
          "categoryId": 4,
          "categoryName": "Others",
          "description": "Others"
        }
      ]
